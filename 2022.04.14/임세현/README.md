# 안드로이드 테스트



### 기존 안드로이드 테스트의 문제점

* 테스트 코드 이전의 안드로이드 테스트는 아래 순서로 진행되었습니다.



[무한 반복]

1. 앱을 설치 후 직접 결과를 확인
2. 에러가 발생할 경우 로그를 찍어서 확인
3. 수정 후 테스트



위와 같은 방법으로 테스트를 진행해도 당장은 상관 없을 수 있습니다.

하지만 대규모 프로젝트의 경우 빌드하는 시간, 테스트를 UI로 하는 시간이 겹쳐 많은 시간이 소요됩니다. 따라서 테스트를 위해 매번 앱을 빌드하는 것은 **비효율적인 작업**입니다.

테스트 코드를 통해서 내가 만든 코드가 **의도한 대로 정확하게 작동**이 되는지와 **신뢰성이 높은 코드의 생산성**을 높일 수 있습니다.



### 테스트 코드 장점

**결함을 사전에 발견할 수 있습니다.**

* 테스트 코드는 모든 부분을 작성해야 합니다. 이를 통해 부족한 부분들을 보완할 수 있으며 안정성 있는 코드를 개발 할 수 있습니다.

**문서로서 적용할 수 있다.**

* 이미 제작 되어 있거나 참고하려는 코드를 이용 할때 테스트 코드를 작성자의 의도, 사용법, 주의사항 등이 드러나게 되어 있어 문서로 작용 할 수 있다.

**모듈이 의도되로 동작하고 있음을 확인할 수 있다.**

* 리펙토링 시 부담을 덜어줄 수 있다.

**더 나은 구조를 유도할 수 있다.**

* 테스트 코드를 짜다보면 이리저리 의존성에 걸려 테스트코드를 짜기 어렵거나 짤 수 없는 상황이 생길 수 있다. 이는 해당 소스가 나쁜 구조라는 의미로 테스트가 가능하게 역할 분담 및 관심사의 분리 등을 진행 하여 좀더 나은 방향의 구조를 유도 할 수 있다. 



### 안드로이드 테스트

* 안드로이드에는 기본적으로 JUnit을 기반으로 한다.
* JVM에서 **계측 테스트(Instrumentation Test)**, **로컬 단위 테스트(Unit Test)**를 진행 할 수 있습니다.

![img](https://blog.kakaocdn.net/dn/ei7Ook/btrc8Bz7MOc/IY3KBZDWrKH339fH5zpww1/img.png)



**Unit Test**(로컬 단위 테스트)

* 위치 : *module-name/src/text/java/*
* 컴퓨터의 **로컬 JVM(Java Virtual Machine)에서 실행되는 테스트**입니다. 테스트에 Android 프레임워크 종속 항목이 없거나 Android 프레임워크  종속 항목을 모의 구현할 수 있는 경우 이 테스트를 사용하면 실행 시간을 최소화할 수 있다.
* 이 경우 JUnit, Mockito, PowerMock, Truth,  Robolectric와 같은 라이브러리를 사용할 수 있습니다.

![img](https://blog.kakaocdn.net/dn/ztwHf/btq7oGOsSpD/MdrKO5vfIkbWWvWVlvhu2k/img.png)



**Instrumentation Test**(계측 테스트)

* 위치 : *module-name/src/androidTest/java/*
* 안드로이드 프레임워크에 종속성이 있는 테스트이며 실제 안드로이드 기기나 에물레이터에 실행되는 테스트이다.

* 이 경우 Espresso, UIAnimator, Robotium, Appium, Calabas와 같은 라이브러리를 사용할 수 있습니다.

![img](https://blog.kakaocdn.net/dn/lmnbs/btq7n1eir2V/sd4XzoLP9l76MRLZ9oCFE1/img.png)

